@model VildplocksquizHemsida.Models.QuizQuestion

@{
    ViewData["Title"] = "Quiz";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@if (ViewBag.NoQuestions != null && ViewBag.NoQuestions == true)
{
    <p>No questions available.</p>
}
else if (Model != null)
{
    <div id="quiz-frame" style="width: 100%; max-width: 600px; margin: auto; text-align: center;">
        <img src="@Model.ImageUrl" alt="Quiz Image" />
        <p>Credit: @Model.Credit</p>
        <p>License: <a href="@Model.License" target="_blank">@Model.License</a></p>
        
        <form asp-action="SubmitAnswer" method="post" id="quiz-form" style="position: relative; display: inline-block;">
            <input type="hidden" name="id" value="@Model.Id" />
            <input type="text" name="answer" placeholder="Gissa namnet" style="display: block; margin: 0 auto 10px auto;" />
            <div style="display: inline-block; position: relative;">
                <button type="submit" style="position: relative; z-index: 1;">Gissa</button>
                <p id="result" style="position: absolute; left: 100%; top: 50%; transform: translateY(-50%); margin-left: 10px; white-space: nowrap;">@ViewBag.Result</p>
            </div>
        </form>
        
        <form asp-action="NextQuestion" method="post" style="margin-top: 10px;">
            <button type="submit">NÃ¤sta bild</button>
        </form>
    </div>
}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var result = "@ViewBag.Result";
        var body = document.body;

        if (result.includes("Korrekt")) {
            body.classList.add("correct-background");
        } else if (result.includes("Fel")) {
            body.classList.add("incorrect-background");
        }

        // Remove the background color on the next question button click
        document.querySelector('form[asp-action="NextQuestion"]').addEventListener('submit', function () {
            body.classList.remove("correct-background");
            body.classList.remove("incorrect-background");
        });
    });
</script>
